<div class='container' id="showcases" data-ctrl="itunes">

  <div class="row cases-export-panel">
    <div class="col-md-8">
      <h1>Crawling <b>Apple itune apps</b></h1>

      <div class="pagination">
        <%= will_paginate @itunes, :renderer => BootstrapPagination::Rails %>
      </div>
    </div>
    <div class="col-md-4">

      <div class="crawl-info-form cif-box">
        <div class="cif-inner">
          <h2 id="crawledItemCount">0</h2>
          <p>Crawled Items</p>
        </div>
        <button id="exportButton" type="button" class="btn btn-success cif-button" data-loading-text="Exporting...">
          Export to Excel
        </button>
      </div>
    </div>

  </div>

  <div class="row" id="cases-table">

    <table  class="table table-striped table-bordered" cellspacing="0" width="100%">
      <thead>
      <tr>
        <th>App</th>
        <th>Version</th>
        <th>Published</th>
        <th>Developer</th>
        <th>Website</th>
        <th>reviews</th>
        <th>reviewsCurrent</th>
        <!--<th>Starts</th>-->
        <!--<th>StartsCurrent</th>-->
      </tr>
      </thead>

      <% @itunes.each do |itune| %>
          <tr>
            <td>

              <%= link_to itune.url do %>
                  <%= image_tag itune.thumbnail, class: "img-responsive" %>
              <% end %>

            </td>
            <td><%= itune.version %></td>
            <td><%= itune.appLastUpdated %></td>
            <td><%= itune.developer %></td>
            <td>
              <%= link_to itune.website do %>
                  <span><%= itune.website %></span>
              <% end %>
            </td>
            <td><%= itune.ofReviews %></td>
            <td><%= itune.ofReviewsCurrent %></td>
            <!--<td><%= itune.starts %></td>-->
            <!--<td><%= itune.startsCurrent %></td>-->
          </tr>
      <% end %>
    </table>

  </div>

  <div class="pagination">
    <%= will_paginate @itunes, :renderer => BootstrapPagination::Rails %>
  </div>

</div>


<script type="text/javascript" charset="utf-8">
  (function() {

    $(document).ready(function() {
      setInterval(fetchCrawledCount, 1000);
    });


  }).call(this);
</script>