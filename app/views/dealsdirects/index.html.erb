<div class='container' id="showcases" data-ctrl="dealsdirects">

  <div class="row cases-export-panel">
    <div class="col-md-8">
      <h1>Crawling <b>DealsDirects products</b></h1>

      <div class="pagination">
        <%= will_paginate @dealsdirects, :renderer => BootstrapPagination::Rails %>
      </div>
    </div>
    <div class="col-md-4">

      <div class="crawl-info-form cif-box">
        <div class="cif-inner">
          <h2 id="crawledItemCount"><%= number_with_delimiter(@count) %></h2>
          <p>Crawled Items</p>
        </div>
        <button id="exportButton" type="button" class="btn btn-success cif-button" data-loading-text="Exporting...">
          Export to Excel
        </button>
      </div>
    </div>

  </div>

  <div class="row" id="cases-table">

    <table class="table table-striped table-bordered" cellspacing="0" width="100%">
      <thead>
      <tr>
        <th>Product</th>
        <th>Brand</th>
        <th>Title</th>
        <th>new_price</th>
        <th>label_price</th>
        <th>Rrp text</th>
      </tr>
      </thead>

      <% @dealsdirects.each do |dealsdirect| %>
          <tr>
            <td>

              <%= link_to dealsdirect.url do %>
                  <%= image_tag dealsdirect.thumbnail, class: "img-responsive" %>
              <% end %>

            </td>
            <td><%= dealsdirect.brand %></td>
            <td><%= dealsdirect.title %></td>
            <td><%= dealsdirect.new_price %></td>
            <td><%= dealsdirect.label_price %></td>
            <td><%= dealsdirect.rrp_text %></td>
          </tr>
      <% end %>
    </table>

  </div>

  <div class="pagination">
    <%= will_paginate @dealsdirects, :renderer => BootstrapPagination::Rails %>
  </div>

</div>


<script type="text/javascript" charset="utf-8">
  (function () {

    $(document).ready(function () {
      setInterval(fetchCrawledCount, 1000);
    });


  }).call(this);
</script>

